import{j as i,G as f,r as u,m as w}from"./index-0RBMUp7G.js";const E=l=>({cargarPacientes:async()=>{try{const a=await i.get("/pacientes");return l.value=a.data,a.data}catch(a){throw console.error("Error al obtener pacientes:",a),a}},guardarPaciente:async a=>{try{return(await i.post("/pacientes",a)).data}catch(r){throw console.error("Error al guardar el paciente:",r),r}},deletePaciente:async a=>{try{return(await i.delete(`/pacientes/${a}`)).data}catch(r){throw console.error("Error al eliminar el paciente:",r),r}},updatePaciente:async(a,r)=>{try{return(await i.put(`/pacientes/${a}`,r)).data}catch(s){throw console.error("Error al actualizar el paciente:",s),s}},cargarPacientesId:async a=>{try{return(await i.get(`/pacientes/${a}`)).data}catch(r){throw console.error("Error al obtener el paciente:",r),r}}}),b=f("pacientes",()=>{const l=u([]),o=E(l),p=u(null),n=u(!1),c=u(null),d=async()=>{try{n.value=!0,c.value=null,l.value=await o.cargarPacientes()}catch(t){c.value="Error al obtener los pacientes",console.error("Error al obtener los pacientes:",t)}finally{n.value=!1}},a=async t=>{try{n.value=!0,c.value=null,p.value=await o.cargarPacientesId(t)}catch(e){c.value="Error al obtener el paciente",console.error("Error al obtener el paciente:",e)}finally{n.value=!1}},r=async t=>{try{n.value=!0,c.value=null;const e=await o.guardarPaciente(t);return l.value.push(e),e}catch(e){throw c.value="Error al crear el paciente",console.error("Error al crear el paciente:",e),e}finally{n.value=!1}},s=async t=>{try{n.value=!0,c.value=null;const e=await o.updatePaciente(t.id_paciente,t),v=l.value.findIndex(h=>h.id_paciente===t.id_paciente);return v!==-1&&(l.value[v]=e),e}catch(e){throw c.value="Error al actualizar el paciente",console.error("Error al actualizar el paciente:",e),e}finally{n.value=!1}},y=async t=>{try{n.value=!0,c.value=null,await o.deletePaciente(t),l.value=l.value.filter(e=>e.id_paciente!==t)}catch(e){throw c.value="Error al eliminar el paciente",console.error("Error al eliminar el paciente:",e),e}finally{n.value=!1}},P=w(()=>l.value.filter(t=>t.estado===null));return{pacientes:l,currentPaciente:p,pacientesDisponibles:P,isLoading:n,error:c,fetchPacientes:d,fetchPacienteById:a,savePaciente:r,updatePaciente:s,deletePaciente:y}});export{b as u};

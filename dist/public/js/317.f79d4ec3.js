"use strict";(self["webpackChunkpvn_fe"]=self["webpackChunkpvn_fe"]||[]).push([[317],{10317:function(e,t,o){o.r(t),o.d(t,{default:function(){return u}});var r=function(){var e=this,t=e._self._c;return t("v-container",[t("v-card",[t("v-card-title",{staticClass:"text-h5"},[e._v("Crear Turno")]),t("v-card-text",[t("v-form",{ref:"form"},[t("v-row",[t("v-col",{attrs:{cols:"12",md:"6"}},[t("v-autocomplete",{attrs:{label:"Paciente",items:e.pacientes,"item-text":"nombre","item-value":"id_paciente",outlined:"",dense:"",required:""},model:{value:e.nuevoTurno.id_paciente,callback:function(t){e.$set(e.nuevoTurno,"id_paciente",t)},expression:"nuevoTurno.id_paciente"}})],1),t("v-col",{attrs:{cols:"12",md:"6"}},[t("v-select",{attrs:{label:"Consultorio",items:e.consultorios,"item-text":"nombre","item-value":"id_consultorio",outlined:"",dense:"",required:""},model:{value:e.nuevoTurno.id_consultorio,callback:function(t){e.$set(e.nuevoTurno,"id_consultorio",t)},expression:"nuevoTurno.id_consultorio"}})],1),t("v-col",{attrs:{cols:"12",md:"6"}},[t("v-select",{attrs:{label:"Tratamiento",items:e.tratamientos,"item-text":"nombre","item-value":"id_tratamiento",outlined:"",dense:"",required:""},model:{value:e.nuevoTurno.id_tratamiento,callback:function(t){e.$set(e.nuevoTurno,"id_tratamiento",t)},expression:"nuevoTurno.id_tratamiento"}})],1),t("v-col",{attrs:{cols:"12",md:"6"}},[t("v-menu",{ref:"menuFecha",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:r}){return[t("v-text-field",e._g(e._b({attrs:{label:"Fecha","prepend-icon":"mdi-calendar",readonly:"",outlined:"",dense:"",required:""},model:{value:e.nuevoTurno.fecha,callback:function(t){e.$set(e.nuevoTurno,"fecha",t)},expression:"nuevoTurno.fecha"}},"v-text-field",r,!1),o))]}}]),model:{value:e.menuFecha,callback:function(t){e.menuFecha=t},expression:"menuFecha"}},[t("v-date-picker",{on:{input:function(t){e.menuFecha=!1}},model:{value:e.nuevoTurno.fecha,callback:function(t){e.$set(e.nuevoTurno,"fecha",t)},expression:"nuevoTurno.fecha"}})],1)],1),t("v-col",{attrs:{cols:"12",md:"6"}},[t("v-text-field",{attrs:{label:"Hora",type:"time",outlined:"",dense:"",required:""},model:{value:e.nuevoTurno.hora,callback:function(t){e.$set(e.nuevoTurno,"hora",t)},expression:"nuevoTurno.hora"}})],1)],1),t("v-btn",{attrs:{color:"primary"},on:{click:e.crearTurno}},[e._v("Crear Turno")])],1)],1)],1),t("v-row",{staticClass:"mt-5"},[t("v-col",{attrs:{cols:"12",md:"6"}},[t("v-menu",{ref:"menuFechaFiltro",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:r}){return[t("v-text-field",e._g(e._b({attrs:{label:"Filtrar por Fecha","prepend-icon":"mdi-calendar",readonly:"",outlined:"",dense:""},model:{value:e.filtroFecha,callback:function(t){e.filtroFecha=t},expression:"filtroFecha"}},"v-text-field",r,!1),o))]}}]),model:{value:e.menuFechaFiltro,callback:function(t){e.menuFechaFiltro=t},expression:"menuFechaFiltro"}},[t("v-date-picker",{on:{input:function(t){e.menuFechaFiltro=!1}},model:{value:e.filtroFecha,callback:function(t){e.filtroFecha=t},expression:"filtroFecha"}})],1)],1),t("v-col",{staticClass:"d-flex align-center justify-center",attrs:{cols:"12",md:"6"}},[t("v-btn",{attrs:{color:"primary"},on:{click:e.cargarTurnos}},[e._v("Filtrar Turnos")])],1)],1),t("v-card",[t("v-card-title",{staticClass:"text-h5"},[e._v("Turnos Programados")]),t("v-card-text",[t("v-simple-table",[t("thead",[t("tr",[t("th",[e._v("Paciente")]),t("th",[e._v("Consultorio")]),t("th",[e._v("Fecha")]),t("th",[e._v("Hora")])])]),t("tbody",e._l(e.turnos,(function(o){return t("tr",{key:o.id_turno},[t("td",[e._v(e._s(o.nombre_paciente))]),t("td",[e._v(e._s(o.consultorio))]),t("td",[e._v(e._s(o.fecha))]),t("td",[e._v(e._s(o.hora))])])})),0)])],1)],1)],1)},a=[],n=o(94373),c={data(){return{menuFecha:!1,menuFechaFiltro:!1,filtroFecha:"",consultorios:[],tratamientos:[],pacientes:[],turnos:[],nuevoTurno:{id_paciente:null,id_consultorio:null,id_tratamiento:null,fecha:"",hora:""}}},methods:{async cargarConsultorios(){try{const e=await n.A.get("/consultorios");this.consultorios=e.data}catch(e){console.error("Error al cargar consultorios:",e)}},async cargarTratamientos(){try{const e=await n.A.get("/tratamientos");this.tratamientos=e.data}catch(e){console.error("Error al cargar tratamientos:",e)}},async cargarPacientes(){try{const e=await n.A.get("/pacientes");this.pacientes=e.data}catch(e){console.error("Error al cargar pacientes:",e)}},async cargarTurnos(){try{const e=await n.A.get("/Calendarturnos",{params:{fecha:this.filtroFecha}});this.turnos=e.data}catch(e){console.error("Error al cargar turnos:",e)}},async crearTurno(){try{const e=await n.A.post("/turnos",this.nuevoTurno);this.$refs.form.reset(),this.$toast.success(e.data.message||"Turno creado con Ã©xito.")}catch(e){console.error("Error al crear el turno:",e);const t=e.response?.data?.message||"Error al crear el turno.";this.$toast.error(t)}}},mounted(){this.cargarConsultorios(),this.cargarTratamientos(),this.cargarPacientes(),this.cargarTurnos()}},s=c,i=o(81656),l=(0,i.A)(s,r,a,!1,null,null,null),u=l.exports}}]);
//# sourceMappingURL=317.f79d4ec3.js.map
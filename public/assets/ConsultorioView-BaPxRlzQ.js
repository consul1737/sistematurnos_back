import{u as oo,a as ao,_ as uo,b as mo}from"./DialogEliminar.vue_vue_type_script_setup_true_lang-D3plHF8c.js";import{d as G,u as W,b as e,c as F,o as T,w as t,e as o,J as X,i as s,g as B,f as y,B as j,t as N,q as vo,F as I,v as H,n as V,r as A,m as Z,z as Q,y as K,_ as _o,j as Y,p as po}from"./index-0RBMUp7G.js";const fo={key:0},go={style:{display:"flex","flex-direction":"column",gap:"8px"}},bo={style:{display:"flex","flex-wrap":"wrap",gap:"8px"}},yo={key:0,style:{display:"flex","justify-content":"start"}},ko={key:1,style:{padding:"8px 0"}},Co=G({__name:"CardConsultorio",props:{consultorio:{},isSelected:{type:Boolean},toggle:{type:Function}},emits:["abrir-dialogo-eliminar","abrir-dialogo-editar","abrir-dialogo-tratamientos"],setup(z,{emit:k}){const n=W(),c=k,f=a=>{c("abrir-dialogo-eliminar",a)},r=a=>{c("abrir-dialogo-editar",a)},u=a=>{c("abrir-dialogo-tratamientos",a)};return(a,l)=>{const i=e("v-card-title"),d=e("v-chip"),E=e("v-card-text"),w=e("v-icon"),D=e("v-btn"),v=e("v-card"),m=e("v-hover");return T(),F(m,null,{default:t(({isHovering:C,props:$})=>[o(v,X({color:a.isSelected?s(n).global.current.value.colors.primary:s(n).global.current.value.colors["background-list"],onClick:a.toggle,class:["mb-2 position-relative pa-5",{"on-hover":C}]},$,{style:{background:s(n).global.current.value.colors.background,color:s(n).global.current.value.colors["on-background"],border:`1px solid ${s(n).global.current.value.colors.border}`,transition:"border-color 0.3s ease-in-out",maxWidth:"300px",marginLeft:"10px"},elevation:"0",outlined:""}),{default:t(()=>[o(i,{class:"text-h6"},{default:t(()=>[y(j(a.consultorio.nombre_consultorio),1)]),_:1}),o(E,null,{default:t(()=>[a.consultorio.tratamientos&&a.consultorio.tratamientos.length>0?(T(),N("div",fo,[B("div",go,[B("div",bo,[(T(!0),N(I,null,H(a.consultorio.tratamientos.slice(0,3),g=>(T(),F(d,{key:g.id_tratamiento,color:g.color||"primary","text-color":"black",style:{"min-width":"120px","justify-content":"start","flex-grow":"1"}},{default:t(()=>[B("strong",null,j(g.nombre),1),y(" ("+j(g.duracion)+") ",1)]),_:2},1032,["color"]))),128))]),a.consultorio.tratamientos.length>3?(T(),N("div",yo,[o(d,{color:"primary",onClick:l[0]||(l[0]=g=>u(a.consultorio)),style:{"min-width":"120px","justify-content":"center"}},{default:t(()=>[y(" +"+j(a.consultorio.tratamientos.length-3)+" más ",1)]),_:1})])):vo("",!0)])])):(T(),N("div",ko,"No hay tratamientos asociados."))]),_:1}),B("div",{class:"pa-2 transition-swing",style:V([{"z-index":"10",position:"absolute",right:"0",top:"0",transition:"opacity 0.3s ease-in-out"},{opacity:C?1:0}])},[o(D,{icon:"",small:"",class:"mt-2",style:V({color:s(n).global.current.value.colors.info,background:s(n).global.current.value.colors["background-list"],transition:"color 0.3s ease-in-out",width:"30px",height:"30px"}),onClick:l[1]||(l[1]=g=>r(a.consultorio))},{default:t(()=>[o(w,{size:20},{default:t(()=>l[3]||(l[3]=[y("mdi-pencil")])),_:1})]),_:1},8,["style"]),o(D,{icon:"",small:"",class:"ml-2 mr-5 mt-2",style:V({color:s(n).global.current.value.colors.error,background:s(n).global.current.value.colors["background-list"],transition:"color 0.3s ease-in-out",width:"30px",height:"30px"}),onClick:l[2]||(l[2]=g=>f(a.consultorio))},{default:t(()=>[o(w,{size:20},{default:t(()=>l[4]||(l[4]=[y("mdi-delete")])),_:1})]),_:1},8,["style"])],4)]),_:2},1040,["color","onClick","class","style"])]),_:1})}}}),xo={key:0},To={key:1},Eo=G({__name:"DialogTratamientos",props:{consultorioActivo:{}},emits:["close-dialog"],setup(z,{emit:k}){const n=W(),c=k,f=()=>{c("close-dialog")};return(r,u)=>{const a=e("v-icon"),l=e("v-btn"),i=e("v-toolbar"),d=e("v-chip"),E=e("v-card-text"),w=e("v-card");return T(),F(w,{style:V({color:s(n).global.current.value.colors["on-surface"],backgroundColor:s(n).global.current.value.colors.background})},{default:t(()=>{var D;return[o(i,{color:"primary",title:`Tratamientos de ${((D=r.consultorioActivo)==null?void 0:D.nombre_consultorio)||""}`},{default:t(()=>[o(l,{icon:"",dark:"",onClick:f},{default:t(()=>[o(a,null,{default:t(()=>u[0]||(u[0]=[y("mdi-close")])),_:1})]),_:1})]),_:1},8,["title"]),o(E,{class:"pa-4"},{default:t(()=>[r.consultorioActivo.tratamientos.length?(T(),N("div",xo,[(T(!0),N(I,null,H(r.consultorioActivo.tratamientos,v=>(T(),F(d,{key:v.id_tratamiento,color:v.color||"primary","text-color":"black",class:"mb-2 mr-2"},{default:t(()=>[B("strong",null,j(v.nombre),1),y(" - "+j(v.descripcion)+" ("+j(v.duracion)+") ",1)]),_:2},1032,["color"]))),128))])):(T(),N("div",To,"No hay tratamientos para mostrar"))]),_:1})]}),_:1},8,["style"])}}}),ho=G({__name:"DialogCrearEditar",props:{isEdit:{type:Boolean},consultorio:{},Tratamientos:{}},emits:["submit","close"],setup(z,{emit:k}){var w,D;const n=W(),c=z,f=k,r=A(((w=c.consultorio)==null?void 0:w.nombre_consultorio)||""),u=A(((D=c.consultorio)==null?void 0:D.tratamientos)||[]),a=Z(()=>({nombre_consultorio:r.value,tratamientos:u.value,...c.isEdit&&c.consultorio&&{id_consultorio:c.consultorio.id_consultorio}})),l=()=>{f("submit",a.value)},i=()=>{f("close")},d=v=>{u.value=u.value.filter(m=>m.id_tratamiento!==v)},E=()=>{r.value="",u.value=[]};return c.consultorio||E(),Q(()=>c.isEdit,v=>{v||E()}),Q(()=>c.consultorio,v=>{r.value=(v==null?void 0:v.nombre_consultorio)||"",u.value=(v==null?void 0:v.tratamientos)||[]},{immediate:!0}),(v,m)=>{const C=e("v-icon"),$=e("v-btn"),g=e("v-toolbar-title"),S=e("v-toolbar"),x=e("v-text-field"),b=e("v-chip"),q=e("v-avatar"),P=e("v-list-item"),R=e("v-select"),J=e("v-card-text"),p=e("v-spacer"),_=e("v-card-actions"),L=e("v-card");return T(),F(L,null,{default:t(()=>[o(S,{flat:"",height:"50px",tile:"",dark:"",color:"primary"},{default:t(()=>[o($,{icon:"",dark:"",onClick:i},{default:t(()=>[o(C,null,{default:t(()=>m[2]||(m[2]=[y("mdi-close")])),_:1})]),_:1}),o(g,null,{default:t(()=>[y(j(v.isEdit?"Editar Consultorio":"Agregar Consultorio"),1)]),_:1})]),_:1}),o(J,{style:V({height:"calc(100vh - 50px)",backgroundColor:s(n).global.current.value.colors.background,color:s(n).global.current.value.colors["on-background"]})},{default:t(()=>[o(x,{modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=U=>r.value=U),label:"Nombre del Consultorio"},null,8,["modelValue"]),o(R,{modelValue:u.value,"onUpdate:modelValue":m[1]||(m[1]=U=>u.value=U),label:"Tratamientos",items:v.Tratamientos,"item-title":"nombre","item-value":"id_tratamiento",multiple:"",required:""},{selection:t(({item:U})=>[o(b,{color:U.raw.color||"",closable:"","onClick:close":M=>d(U.raw.id_tratamiento)},{default:t(()=>[y(j(U.title),1)]),_:2},1032,["color","onClick:close"])]),item:t(({props:U,item:M})=>[o(P,X(U,{title:M.raw.nombre,"prepend-avatar":M.raw.color||void 0,tile:"",style:{color:s(n).global.current.value.colors["on-background"],backgroundColor:s(n).global.current.value.colors.background,margin:"0 !important",minHeight:"36px"}}),{prepend:t(()=>[o(q,{color:M.raw.color||void 0,size:"12",class:"mr-2"},null,8,["color"])]),_:2},1040,["title","prepend-avatar","style"])]),_:1},8,["modelValue","items"])]),_:1},8,["style"]),o(_,{style:V({backgroundColor:s(n).global.current.value.colors.background,color:s(n).global.current.value.colors["on-background"]})},{default:t(()=>[o(p),o($,{text:"",onClick:i,style:V({color:s(n).global.current.value.colors.error,backgroundColor:s(n).global.current.value.colors["background-list"]})},{default:t(()=>m[3]||(m[3]=[y("Cancelar")])),_:1},8,["style"]),o($,{style:V({color:s(n).global.current.value.colors.info,backgroundColor:s(n).global.current.value.colors["background-list"]}),text:"",onClick:l},{default:t(()=>[y(j(v.isEdit?"Editar":"Guardar"),1)]),_:1},8,["style"])]),_:1},8,["style"])]),_:1})}}}),wo=G({__name:"CarrouselConsultorios",props:{consultorios:{},Tratamientos:{}},setup(z){const k=oo(),{addConsultorio:n,updateConsultorio:c,deleteConsultorio:f,fetchConsultoriosyTratamientos:r}=mo(),u=z,{consultorios:a}=K(u),l=A({eliminar:!1,editar:!1,tratamientos:!1}),i=A(!1),d=A({id_consultorio:0,nombre_consultorio:"",tratamientos:[]}),E=A(""),w=A([]),D=A(null),v=x=>{d.value=x,l.value.tratamientos=!0},m=x=>{d.value=x,l.value.eliminar=!0,console.log("Consultorio a eliminar:",l.value.eliminar)},C=()=>{d.value={nombre_consultorio:"",tratamientos:[]},i.value=!1,l.value.editar=!0},$=x=>{i.value=!0,d.value=x,l.value.editar=!0,E.value=x.nombre_consultorio,w.value=x.tratamientos.length>0?x.tratamientos.map(b=>{var q;return{id_tratamiento:b.id_tratamiento,nombre:b.nombre,color:b.color,descripcion:b.descripcion??"",duracion:((q=b.duracion)==null?void 0:q.toString())??"0",costo:b.costo??0}}):[]},g=async x=>{i.value?(await c(x),await k.cargarDatos()):(await n(x.nombre_consultorio,x.tratamientos),await k.cargarDatos()),l.value.editar=!1},S=async()=>{try{await f(d.value),await r(a),l.value.eliminar=!1,await k.cargarDatos()}catch(x){alert(x+"No se pudo eliminar el consultorio. Puede que tenga tratamientos asociados.")}};return(x,b)=>{const q=e("v-row"),P=e("v-slide-group-item"),R=e("v-slide-group"),J=e("v-col"),p=e("v-dialog");return T(),N(I,null,[o(J,{cols:"12"},{default:t(()=>[o(q,{justify:"space-between",class:"mx-4 my-2"},{default:t(()=>[b[6]||(b[6]=B("h3",null,"Listado de Consultorios",-1)),o(ao,{onClick:C,text:"+ Agregar Consultorio"})]),_:1}),o(q,{justify:"center",width:"100%"},{default:t(()=>[o(R,{modelValue:D.value,"onUpdate:modelValue":b[0]||(b[0]=_=>D.value=_),class:"pa-4","show-arrows":""},{default:t(()=>[(T(!0),N(I,null,H(s(a),_=>(T(),F(P,{key:_.id_consultorio},{default:t(({isSelected:L,toggle:U})=>[o(Co,{consultorio:_,isSelected:L,toggle:U,onAbrirDialogoEliminar:m,onAbrirDialogoEditar:$,onAbrirDialogoTratamientos:v},null,8,["consultorio","isSelected","toggle"])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(p,{modelValue:l.value.editar,"onUpdate:modelValue":b[2]||(b[2]=_=>l.value.editar=_),scrollable:"",width:"35vw",persistent:"",transition:"slide-x-transition"},{default:t(()=>[o(ho,{"is-edit":i.value,consultorio:d.value,Tratamientos:x.Tratamientos,onSubmit:g,onClose:b[1]||(b[1]=_=>l.value.editar=!1)},null,8,["is-edit","consultorio","Tratamientos"])]),_:1},8,["modelValue"]),o(uo,{modelValue:l.value.eliminar,"onUpdate:modelValue":b[3]||(b[3]=_=>l.value.eliminar=_),entity:d.value,"entity-name":"el consultorio",title:"Eliminar Consultorio","confirm-text":"Confirmar",onConfirm:S},null,8,["modelValue","entity"]),o(p,{modelValue:l.value.tratamientos,"onUpdate:modelValue":b[5]||(b[5]=_=>l.value.tratamientos=_),scrollable:"",overlay:!1,"max-width":"500px",transition:"dialog-transition"},{default:t(()=>[o(Eo,{consultorioActivo:d.value,onCloseDialog:b[4]||(b[4]=_=>l.value.tratamientos=!1)},null,8,["consultorioActivo"])]),_:1},8,["modelValue"])],64)}}}),Do=_o(wo,[["__scopeId","data-v-ee4b19b2"]]),$o=()=>({addTratamiento:async(c,f,r,u,a)=>{try{await Y.post("/tratamientos/",{nombre:c,descripcion:f,costo:r,duracion:u,color:a})}catch(l){console.error("Error al crear el tratamiento:",l)}},updateTratamiento:async c=>{console.log("Tratamiento a actualizar:",c);const{id_tratamiento:f,nombre:r,descripcion:u,costo:a,duracion:l,color:i}=c;try{await Y.put(`/tratamientos/${f}`,{nombre:r,descripcion:u,costo:a,duracion:l,color:i})}catch(d){console.error("Error al actualizar el tratamiento:",d)}},eliminarTratamiento:async c=>{var f;try{await Y.delete(`/tratamientos/${c.id_tratamiento}`)}catch(r){if(r instanceof Error){console.error("Error:",r.message),alert("Error de conexión");return}const u=r;if(u.response)switch(u.response.status){case 400:alert(((f=u.response.data)==null?void 0:f.message)||"Datos inválidos");break;case 404:alert("Tratamiento no encontrado");break;case 500:alert("Error en el servidor");break;default:alert("Error al procesar la solicitud")}else u.request?alert("No se recibió respuesta del servidor"):alert("Error al enviar la solicitud")}}}),Ao=G({__name:"CardTratamientos",props:{tipoTratamientos:{}},emits:["editar-tratamiento","borrar-tratamiento"],setup(z,{emit:k}){const n=z,{tipoTratamientos:c}=K(n),f=k,r=a=>{f("editar-tratamiento",a)},u=a=>{f("borrar-tratamiento",a)};return(a,l)=>{const i=e("v-card-title"),d=e("v-card-subtitle"),E=e("v-icon"),w=e("v-btn"),D=e("v-card"),v=e("v-hover");return T(!0),N(I,null,H(s(c),m=>(T(),F(v,{key:m.id_tratamiento},{default:t(({isHovering:C,props:$})=>[o(D,X({ref_for:!0},$,{color:m.color||"primary",class:"ma-2 pa-2 d-flex flex-column justify-center align-center",style:{position:"relative"}}),{default:t(()=>[o(i,{class:"text-h6 font-weight-bold ma-0 pa-0"},{default:t(()=>{var g;return[y(j((g=m.nombre)==null?void 0:g.toUpperCase()),1)]}),_:2},1024),o(d,{class:"text-subtitle-1 ma-0 pa-0"},{default:t(()=>[y(j(m.descripcion),1)]),_:2},1024),o(d,{class:"text-subtitle-1 ma-0 pa-0"},{default:t(()=>[y(j(m.duracion)+" min ",1)]),_:2},1024),o(i,{class:"text-subtitle-1 ma-0 pa-0"},{default:t(()=>[y("$ "+j(m.costo),1)]),_:2},1024),B("div",{class:"pa-2 transition-ease-in-out",style:V([{"z-index":"10",position:"absolute",right:"0",top:"0"},{opacity:C?1:0}])},[o(w,{color:"#222222",icon:"",small:"",class:"mt-2",onClick:g=>r(m),style:{transition:"color 0.3s ease-in-out",width:"30px",height:"30px"}},{default:t(()=>[o(E,{size:20},{default:t(()=>l[0]||(l[0]=[y("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),o(w,{color:"#222222",icon:"",small:"",class:"ml-2 mr-5 mt-2",onClick:g=>u(m),style:{transition:"color 0.3s ease-in-out",width:"30px",height:"30px"}},{default:t(()=>[o(E,{size:20},{default:t(()=>l[1]||(l[1]=[y("mdi-delete")])),_:1})]),_:2},1032,["onClick"])],4)]),_:2},1040,["color"])]),_:2},1024))),128)}}}),Uo={class:"d-flex justify-lg-space-around"},Vo=G({__name:"DialogCrearEditar",props:{isEdit:{type:Boolean},tratamiento:{}},emits:["create-tratamiento","close-dialog"],setup(z,{emit:k}){var b,q,P,R,J;const n=W(),c=z,{isEdit:f,tratamiento:r}=K(c),u=A(((b=r==null?void 0:r.value)==null?void 0:b.nombre)||""),a=A(((q=r==null?void 0:r.value)==null?void 0:q.descripcion)||""),l=A(((P=r==null?void 0:r.value)==null?void 0:P.costo)||0),i=A(((R=r==null?void 0:r.value)==null?void 0:R.duracion)||0),d=A(((J=r==null?void 0:r.value)==null?void 0:J.color)||"#989898"),E=A(!1),w=A(["#8c57ff","#0d9394","#ffb400","#ff4c51","#16b1ff"]),D=k,v=p=>{d.value=p,E.value=!1},m=p=>d.value===p||!w.value.includes(d.value),C=Z(()=>d.value&&!w.value.includes(d.value)?d.value:"#989898"),$=Z(()=>{var p;return{id_tratamiento:(p=r==null?void 0:r.value)==null?void 0:p.id_tratamiento,nombre:u.value,descripcion:a.value,costo:l.value,duracion:i.value,color:d.value}}),g=()=>{D("close-dialog")},S=()=>{console.log("Datos del formulario:",$.value),D("create-tratamiento",$.value)},x=()=>{u.value="",a.value="",l.value=0,i.value=0,d.value="#989898"};return c.tratamiento||x(),Q(()=>c.isEdit,p=>{p||x()}),Q(()=>c.tratamiento,p=>{u.value=(p==null?void 0:p.nombre)||"",a.value=(p==null?void 0:p.descripcion)||"",l.value=(p==null?void 0:p.costo)||0,i.value=(p==null?void 0:p.duracion)||0,d.value=(p==null?void 0:p.color)||"#989898"},{immediate:!0}),(p,_)=>{const L=e("v-icon"),U=e("v-btn"),M=e("v-toolbar-title"),lo=e("v-toolbar"),O=e("v-text-field"),to=e("v-card-text"),ro=e("v-color-picker"),eo=e("v-card"),no=e("v-menu"),so=e("v-spacer"),io=e("v-card-actions");return T(),F(eo,{style:V({color:s(n).global.current.value.colors["on-surface"],backgroundColor:s(n).global.current.value.colors.background})},{default:t(()=>[o(lo,{flat:"",height:"50px",tile:"",dark:"",color:"primary"},{default:t(()=>[o(U,{icon:"",dark:"",onClick:g},{default:t(()=>[o(L,null,{default:t(()=>_[6]||(_[6]=[y("mdi-close")])),_:1})]),_:1}),o(M,null,{default:t(()=>[y(j(s(f)?"Editar Tratamiento":"Agregar Tratamiento"),1)]),_:1})]),_:1}),o(to,null,{default:t(()=>[o(O,{modelValue:u.value,"onUpdate:modelValue":_[0]||(_[0]=h=>u.value=h),label:"Nombre del Tratamiento"},null,8,["modelValue"]),o(O,{modelValue:a.value,"onUpdate:modelValue":_[1]||(_[1]=h=>a.value=h),label:"Descripción"},null,8,["modelValue"]),o(O,{modelValue:l.value,"onUpdate:modelValue":_[2]||(_[2]=h=>l.value=h),type:"number",label:"Precio"},null,8,["modelValue"]),o(O,{modelValue:i.value,"onUpdate:modelValue":_[3]||(_[3]=h=>i.value=h),type:"number",label:"Duración",suffix:"minutos"},null,8,["modelValue"])]),_:1}),_[8]||(_[8]=B("span",{class:"font-weight-bold ma-2 text-h6"},"Color:",-1)),B("div",Uo,[(T(!0),N(I,null,H(w.value,(h,co)=>(T(),F(U,{key:co,small:"",outlined:"",value:h,color:m(h)?h:"#989898",onClick:No=>v(h),class:"d-flex justify-center align-center",style:V([{padding:"10px 5px",position:"relative",overflow:"hidden"},{borderColor:m(h)?h:"#989898"}])},{default:t(()=>[B("div",{style:V({backgroundColor:h,width:"90%",height:"60%",borderRadius:"0.3rem",aspectRatio:"16 / 9",display:"flex",justifyContent:"center",alignItems:"center"})},[o(L,{icon:"mdi-palette",size:"30"})],4)]),_:2},1032,["value","color","onClick","style"]))),128)),o(no,{modelValue:E.value,"onUpdate:modelValue":_[5]||(_[5]=h=>E.value=h),"close-on-content-click":!1,"offset-y":""},{activator:t(({props:h})=>[o(U,X({small:"",outlined:"",color:C.value,class:"d-flex justify-center align-center",style:{padding:"10px 5px",position:"relative",overflow:"hidden"}},h),{default:t(()=>[o(L,{icon:"mdi-palette",size:"30"})]),_:2},1040,["color"])]),default:t(()=>[o(eo,null,{default:t(()=>[o(to,null,{default:t(()=>[o(ro,{modelValue:d.value,"onUpdate:modelValue":_[4]||(_[4]=h=>d.value=h),mode:"hexa","show-swatches":"","swatches-max-height":"200",onInput:v},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o(io,null,{default:t(()=>[o(so),o(U,{color:"red darken-1",style:V({color:s(n).global.current.value.colors.info,backgroundColor:s(n).global.current.value.colors["background-list"]}),text:"",onClick:g},{default:t(()=>_[7]||(_[7]=[y("Cancelar")])),_:1},8,["style"]),o(U,{color:"green darken-1",style:V({color:s(n).global.current.value.colors.info,backgroundColor:s(n).global.current.value.colors["background-list"]}),text:"",onClick:S},{default:t(()=>[y(j(s(f)?"Editar":"Guardar"),1)]),_:1},8,["style"])]),_:1})]),_:1},8,["style"])}}}),jo={class:"text-h6 font-weight-bold ma-4"},zo=G({__name:"DialogEliminar",props:{tratamientoActivo:{}},emits:["cerrar-dialogo","confirmarEliminacion"],setup(z,{emit:k}){const n=W(),c=z,f=k,{tratamientoActivo:r}=K(c),u=()=>{f("cerrar-dialogo")},a=()=>{f("confirmarEliminacion")};return(l,i)=>{const d=e("v-icon"),E=e("v-btn"),w=e("v-toolbar-title"),D=e("v-toolbar"),v=e("v-card-text"),m=e("v-spacer"),C=e("v-card-actions"),$=e("v-card");return T(),F($,{style:V({color:s(n).global.current.value.colors["on-surface"],backgroundColor:s(n).global.current.value.colors.background})},{default:t(()=>[o(D,{flat:"",height:"50px",tile:"",dark:"",color:"primary"},{default:t(()=>[o(E,{icon:"",dark:"",onClick:u},{default:t(()=>[o(d,null,{default:t(()=>i[0]||(i[0]=[y("mdi-close")])),_:1})]),_:1}),o(w,null,{default:t(()=>i[1]||(i[1]=[y("Eliminar Tratamiento")])),_:1})]),_:1}),o(v,null,{default:t(()=>{var g;return[B("p",jo," ¿Estás seguro de que deseas eliminar el tratamiento "+j((g=s(r))==null?void 0:g.nombre)+"? ",1)]}),_:1}),o(C,null,{default:t(()=>[o(m),o(E,{color:"blue darken-1",style:V({color:s(n).global.current.value.colors.info,backgroundColor:s(n).global.current.value.colors["background-list"]}),text:"",onClick:u},{default:t(()=>i[2]||(i[2]=[y("Cancelar")])),_:1},8,["style"]),o(E,{color:"red darken-1",style:V({color:s(n).global.current.value.colors.info,backgroundColor:s(n).global.current.value.colors["background-list"]}),text:"",onClick:a},{default:t(()=>i[3]||(i[3]=[y("Eliminar")])),_:1},8,["style"])]),_:1})]),_:1},8,["style"])}}}),So=G({__name:"GridTratamientos",props:{tratamientos:{}},setup(z){const k=oo(),{addTratamiento:n,eliminarTratamiento:c,updateTratamiento:f}=$o(),r=z,{tratamientos:u}=K(r),a=A({tratamientos:!1,eliminar:!1}),l=A(!1),i=A(null),d=()=>{a.value.tratamientos=!a.value.tratamientos,l.value=!1},E=m=>{i.value=m,a.value.eliminar=!0},w=async m=>{i.value=m,l.value=!0,a.value.tratamientos=!0},D=async()=>{await c(i==null?void 0:i.value),a.value.eliminar=!1,await k.cargarDatos()},v=async m=>{const{nombre:C,descripcion:$,costo:g,duracion:S,color:x}=m;l.value?(await f(m),await k.cargarDatos()):(await n(C,$,g,S,x),await k.cargarDatos()),a.value.tratamientos=!1};return(m,C)=>{const $=e("v-row"),g=e("v-dialog");return T(),N(I,null,[o($,{justify:"space-between",class:"mx-4 my-2"},{default:t(()=>[C[4]||(C[4]=B("h3",null,"Listado de Tratamientos",-1)),o(ao,{onClick:d,text:"+ Agregar Tratamiento"})]),_:1}),o($,{cols:"12",md:"4"},{default:t(()=>[o(Ao,{"tipo-tratamientos":s(u),onEditarTratamiento:w,onBorrarTratamiento:E},null,8,["tipo-tratamientos"])]),_:1}),o(g,{modelValue:a.value.tratamientos,"onUpdate:modelValue":C[1]||(C[1]=S=>a.value.tratamientos=S),scrollable:"",width:"35vw",persistent:"",transition:"slide-x-transition"},{default:t(()=>[o(Vo,{tratamiento:i.value||{},"is-edit":l.value,onCloseDialog:C[0]||(C[0]=S=>a.value.tratamientos=!1),onCreateTratamiento:v},null,8,["tratamiento","is-edit"])]),_:1},8,["modelValue"]),o(g,{modelValue:a.value.eliminar,"onUpdate:modelValue":C[3]||(C[3]=S=>a.value.eliminar=S),scrollable:"",persistent:"",overlay:!1,"max-width":"500px",transition:"dialog-transition"},{default:t(()=>[o(zo,{"tratamiento-activo":i.value||{},onConfirmarEliminacion:D,onCerrarDialogo:C[2]||(C[2]=S=>a.value.eliminar=!1)},null,8,["tratamiento-activo"])]),_:1},8,["modelValue"])],64)}}}),Bo={class:"d-flex flex-column align-center"},Go=G({__name:"ConsultorioView",setup(z){const k=oo();return po(async()=>{await k.cargarDatos()}),(n,c)=>{const f=e("v-row");return T(),N("section",Bo,[c[0]||(c[0]=B("h1",{class:"text-h4 my-6"},"Gestionar Consultorios",-1)),o(f,{style:{width:"90%",margin:"0 auto"}},{default:t(()=>[o(Do,{consultorios:s(k).consultorios,Tratamientos:s(k).tratamientos},null,8,["consultorios","Tratamientos"])]),_:1}),o(f,{class:"ma-11 d-flex justify-lg-space-around",style:{width:"90%",margin:"0 auto"}},{default:t(()=>[o(So,{tratamientos:s(k).tratamientos},null,8,["tratamientos"])]),_:1})])}}});export{Go as default};
